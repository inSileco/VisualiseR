# A propos de R


Étant donné l’engouement autour de R depuis les 10 dernières années, on oublie
que le début de l'histoire remonte au années 70. Dans ce chapitre, nous revenons sur la naissance et le développement de R:
de S depuis les années 70 jusqu'à la fin des années 90. Nous décrivons
ensuite l'émergence de R et la relation qu'il existe entre S et R.
Dans la deuxième partie de ce chapitre, nous dressons un portait de R en 2019.



## De S à R - 40 ans d'histoire

La description ci-dessus est une synthèse des trois documents suivants:

- Un article d'un des principaux contributeurs de Richard A. Becker [@becker_brief_1994]
- Le chapitre 2 du dernier livre de John M. Chambers, l'un des
principaux contributeurs de S et maintenant contributeur de R [@chambers_extending_2016]
- Le document *R genesis* par Ross Ihaka, l'un des auteurs de R disponible en ligne https://cran.r-project.org/doc/html/interface98-paper/paper_1.html



### Le langage S

Pour bien comprendre l'émergence de R, nous revenons sur le contexte dans lequel le langage S a vu le jour et comprendre ce que R lui doit. S est le produit du travail de chercheurs qui étaient en quête d'un outil performant pour la recherche en statistique dans un monde où l'informatique était en pleine effervescence.

Le résumé que nous faisons de cette émergence débute en 1976, à Murray Hill dans le New-Jersey (États-Unis), au département de recherche en statistique informatique des laboratoires Bell[^noteS1], les calculs sont alors réalisés à l'aide d'une bibliothèque FORTRAN[^noteS2] SCS (_Statistical Computing Subroutines_). Un des problèmes posés par cet outil était le temps passé à gérer les entrées et les sortis au programme qui était long même pour des calculs simples (une régression linéaire par exemple). Suite à ce constat, les chercheurs John Chambers, Richard Becker, Doug Dunn et Paul Tukey, décidèrent de construire un environnement interactif et un nouveau langage afin de faciliter leur recherche[^noteS3]. Ce nouveau programme informatique faciliterait l'utilisation des la bibliothèque SCS grâce à un ensemble d'objets et de fonctions manipulés à l'aide d'une syntaxe intuitive et permettrait une exploration visuelle des données à l'aide
d'un outil graphique performant.

<!-- Tukey Exploratory Data Analysis-->

Suite aux efforts de ces chercheurs, la première version de S (version 1.0) vu le jour en janvier 1977 et fut diffusée au sein des laboratoires Bell. Ainsi se
constitua la toute première communauté d'utilisateurs de S, celles des chercheurs des laboratoires Bell: une communauté restreinte mais très active. La première version de S reflète les avancements en statistique informatique fait depuis les années 50 et met en application les principes que John Chambers développe en 1977 [@chambers_computational_1977] :

  1. stockage, manipulation des données avant traitement (les trier par exemple);
  2. utiliser des algorithms efficaces pour traiter les données;
  3. visualiser les données avec des bibliothèques adéquates.

L'objet de base de S était alors le vecteur (de nombres, de caractères ou bien de variables booléennes), ce qui reste valable avec R aujourd'hui. Une matrice
était aussi un vecteur mais avec un vecteur auxiliaire `Dim` (ces vecteurs
auxiliaires deviendront plus tard les attributs accessible avec la fonction
`attributes` dans R). Cette version offrait également la possibilité de créer
des structures dont les différentes composantes étaient appelées grâce à
l'opérateur `$` (abondamment utilisé par tous les utilisateurs de R
aujourd'hui, /de même que la fonction `str` pour avoir un aperçu de l'organisation d'un objet dans R). Ces données étant facilement manipulable via un opérateur d'accès aux différents éléments `[]` (subscripting operator) et permet, entre autre, de sous-échantillonner les éléments à partir d'une variable booléenne (ce que les utilisateurs de R font très souvent). Enfin, les graphiques, sujet de ce livre, étaient réalisés grâce à un ensemble de fonctions implémentées dans une bibliothèque distincte appelée GR-Z dont les fonctionnalités sont encore aujourd'hui présentes dans le package R `graphics`.


L'année suivante, la version 2.0 introduisit notamment les objets de type `list` pour inclure une collection d'autre objets, amenant ainsi un nouveau type de relation entre les objets. En 1978, les progrès du langage de programmation C, développé dans le même bâtiment aux laboratoires Bell, donnèrent un nouvel élan au langage S. Ce langage développé par Dennis Ritchie et Ken Thompson depuis 1969 a été conçu pour être puissant, flexible et
portable, c'est notamment le langage dans lequel est écrit le kernel Linux qui
est un peu partout aujourd'hui[^noteC]. La portabilité de C, c'est-à-dire le fait qu'il soit utilisable sur un très grand nombre d'ordinateurs d'architectures différentes, décida les créateurs du S (dont les bureaux étaient voisins de celui de Ritchie) d'opter pour une utilisation du langage C et du système UNIX. C'est ainsi qu'en octobre 1979, une version UNIX fut implémentée et devint la version de développement du langage S. R est lui
même écrit en C.

La suite du développement du langage est liée aux retours des premiers utilisateurs de S.
Ces derniers étaient assez limités dans les tâches qu'ils pouvaient accomplir avec S.
Afin d'augmenter les possibilités offertes à l'utilisateur, une boucle `for` très flexible fut introduite, dont la syntaxe a été conservé par R : `for (i in index) expression`.
De même, une fonction `apply()` fut ajoutée pour répéter une opération donnée sur chaque colonne ou chaque ligne d'une matrice. Il apparut également une interface de langage pour créer des macros[^noteS4]. Toutes ces innovations sont contenues dans la version de 1984 décrite dans un livre surnommé le _Brown Book_[^noteS5]: _S: An Interactive Environment for Data Analysis and Graphics_ [@becker_s_1984]. L'année suivante, le livre _Extending the S system_ [@becker_extending_1985] décrit comment ajouter de nouvelles fonctions au langage S. C'est au même moment que le code source du langage S fut largement distribué sous licence commerciale et éducationnelle.


### Le « new S »

Durant la période 1984--1988, S fut profondément transformé. Alors qu'il était à l'origine dédié à la recherche en statistique, S avait, de fait, de grandes capacités pour manipuler des données, les analyser et les visualiser. Un projet mené par John Chambers fut dédié à l'exploitation de ces atouts pour produire un langage de programmation générale dédié au traitement des données (le _Quantitative Programming Environment_, QPE). En 1986, suite aux avancés du projet, il se posa la question de savoir comment articuler S et QPE. De cette interrogation naquit une troisième version du langage S décrite dans le _Blue Book_: _The New S Language: A Programming Environment for Data Analysis and Graphics_ [@becker_new_1988]. Les changements apportés étaient d'une telle ampleur qu'il fallut changé le nom : S devint le new S. Beaucoup de fonctions furent réécrites en C. Ainsi, la part de FORTRAN diminua au profit de C pour améliorer la portabilité du new S. A cela s'ajouta la fin de l'interface de langage au profit d'un ensemble très cohérent pour les fonctions. Toutes les fonctions devinrent des objets et les utilisateurs purent alors créer leurs propres fonctions avec la syntaxe que nous connaissons aujourd'hui dans R. Ces fonctions pouvaient avoir un nombre non prédéfini d'arguments et certains de ces arguments pouvaient être passés à d'autres fonctions grâce à l'argument `...`. Les fonctions écrites en C ou FORTRAN pouvaient être incorporées au new S grâce à des fonctions particulières qui existent toujours dans R: `.C()`, `.Fortran()`, etc. Les fonctions graphiques furent également retravaillées et le new S apporta de nouvelles fonctionnalités pour profiter des environnements graphiques, notamment le _X Window System_ (X11), apparu en 1984.

En 1992, un nouveau livre, le _White Book_: _Statistical Models in S_ [@chambers_statistical_1993], développa les nouvelles fonctionnalités du new S pour travailler sur les modèles statistiques. Les objets de classe `data.frame` furent introduit : des matrices dont les colonnes peuvent contenir des objets de différentes natures (p. ex. numérique, texte, booléen, etc.). C'est un objet qui, à notre sense, est vraiment pertinent pour les statistics et sont utilisation est une des forces de R. Avec les `data.frames` sont introduits les objets de classe `formula` (caractérisés par l'opérateur `~`) qui permettent de décrire des modèles complexes en très peu de lignes de code. Enfin, la programmation orientée objet[^noteS6] prend une place plus importante (il y en avait des prémices en 1988 avec la notamment la fonction `print()`). Cette approche donne une cohérence et une certaine facilité d'utilisation au langage S et encore aujourd'hui au langage R : on peut ainsi afficher tous nos objets avec la fonction `print()` dont l'affichage dépendra du type de l'objet (leur classe) sans se poser de question. Le développement d'une approche orientée objet plus formelle est aussi le point central du dernier livre sur S, le *Green Book*: *Programming with Data: A guide to the S Language* qui formalise les objets dit S4 [@chambers_programming_1998].

La création du langage S a soulevé des enjeux techniques majeurs que les développeurs ont surmontés en piochant des idées tantôt dans d'autres langages (p. ex. l'opérateur assignment `<-` provient du langage Algol), tantôt en trouvant des solutions spécifiques à S (p. ex.  l'argument `...` de certaines fonctions). Le résultat de la vingtaine d'années de développement de S a produit un langage puissant pour la recherche en statistique mais plus généralement pour l'ensemble des opérations du traitement de données. C'est pour ces travaux que John Chambers fut récompensé en 1998 par le prix ACM (_Association for Computing Machinery_). Au début des années 1990, deux ramifications se branchèrent à l'aventure S. D'un côté, une entreprise commerciale avec le langage S-PLUS qui propose de faire profiter des potentialités du S au monde de l'entreprise. L'aventure prit fin en 2009 alors que S-PLUS était dans les mains de la société américaine TIBCO qui a finalement opté pour le développement d'un outil basé sur R : TERR (_TIBCO Enterprise Runtime for R_). De l'autre côté, c'est un logiciel libre, R qui vit le jour.



[^noteS1]: La lecture de la page Wikipédia dédiée au Laboratoires Bell permet de
se faire une idée de l'importance des Laboratoires Bell en terme d'innovation,
les laboratoires Google de l'époque! (REF https://fr.wikipedia.org/wiki/Laboratoires_Bell).

[^noteS2]:FORmula TRANslator est un langage apparu en 1954 développé par
John Backus chez IBM (REF https://fr.wikipedia.org/wiki/Fortran).

[^noteS3]:_It was the realization that routine data analysis should not require writing Fortran programs that really got S going._ page... [ref] "Our primary goal was to bring interactive computing to bear on statistics and data analysis problems."

[^noteS4]:Une macro est formée d'un identificateur et d'un morceau de code. Avant l'exécution du programme, toutes les occurrences de l'identificateur dans le code source seront remplacées par le morceau de code auquel elles sont associées.

[^noteS5]:Les livres décrivant le langage S sont nommés par des noms de couleurs, en rapport avec la couleur de leur couverture: http://www.sumsar.net/blog/2014/11/tidbits-from-books-that-defined-s

[^noteS6]:La programmation orientée objet définit des objets et des méthodes tout en permettant de faire un lien entre les deux. Par exemple, si des objets de classe _point_ et d'autres de classe _ligne_ sont définis, une méthode, c.-à-d. une fonction, _plot()_ peut ensuite être définie pour afficher ces deux objets dans un environnement graphique. La force de la programmation orientée objet sera de permettre un affichage adéquat : des points séparés à l'appel de la méthode _plot_ sur l'objet de classe _point_ (_plot(point)_) et des points reliés entre eux à l'appel de la méthode _plot_ sur l'objet de classe _ligne_ (_plot(ligne)_).

[^noteC]: L'article de Wikipedia est un bon point de départ pour s'informer sur l'histoire de C: https://fr.wikipedia.org/wiki/C_(langage) consulté le 21 Décembre 2018.








### De S à R

Au milieu des années 1990, au département de statistiques de l'université
d'Auckland, Ross Ihaka et Robert Gentleman font à un constat similaire à celui
des chercheurs des Bell Labs firent des années plus tôt : le besoin d'un outil logiciel performant pour le domaine. Bien que les premières versions du langage S étaient facilement accessible aux milieux universitaires, l'outil n'était pas libre et difficile à mettre en place sur les machines Macintosh avec lesquelles ces chercheurs travaillaient. Les deux chercheurs se lancèrent alors dans le développement d'un nouvel outil inspirés par le new S mais aussi le Scheme[^noteR2] comme ils expliquent dans leur article de 1996 [@ihaka_r_1996]. Ainsi naquit le langage R, fortement influencé par le new S mais avec un soupçonné de quelque principe de Scheme, notamment pour la gestion de la mémoire et de la portée des variables. Il faut ajouter à ces changements, des travaux sur l'interface graphique avec l'implémentation des couleurs, la texture des lignes, la possibilité d'introduire des formules mathématiques sur un graphique et la mise en page des graphiques. Ces deux derniers éléments sont le fait des travaux de thèse de Paul Murrel qui a travaillé sur la gestion des graphiques sous R[^naisR3].

En août 1993, les auteurs annoncent la mise à disposition de leur travail R sur la liste de diffusion S-news. Comme il a été fait pour S, R a mis en place le moyen de s'enrichir  des retours des utilisateurs. L'un des utilisateurs  particulièrement actif, Martin Mächler de l'Eidgenössische Technische Hochschule Zürich (ETH Zürich)[^naisR5], devint un acteur important du projet et incita les chercheurs de Nouvelle-Zélande à rendre leur logiciel libre. C'est ainsi que R fut mis à disposition de tous sous la licence publique générale GNU-GPL dès 1995, d'où son surnom de _GNU S_. L'article de 1996 _R: A Language for Data Analysis and Graphics_ qui met au grand jour l'existence de R [@ihaka_r_1996]. Ces deux événements combinés donnent une impulsion forte au langage R. De fait, ces dispositions allaient accroître le nombre d'utilisateur, et la distribution et la communication allaient en être profondément changées. En mars 1996, Mächler créa la première liste de diffusion spécifique à R : R-tester, qui fut divisée en trois l'année suivante : R-announcement, R-help et R-devel. Pour organiser le développement de R, il devint pressant d'avoir un système d'archivage dédié à R. Ce fut Kurt Hornik de l'université Technique de Vienne[^naisR4] qui s'en chargea et mis au point un système qui évoluera pour donner le CRAN actuel. Le nombre de retours sur R devint tel que Ihaka, Gentleman et Mächler ne suffisaient plus pour assurer convenablement le développement du langage. Ils décidèrent alors de partager cette tâche avec Doug Bates, Peter Dalgaard, Kurt Hornik, Friedrich Leisch, Thomas Lumley, Paul Murrell, Heiner Schwarte et Luke Tierney : l'équipe de développement _R-Core_[^naisR6] se formait.

Une manière simple et efficace pour prendre conscience de l'évolution de R de 1997 à nos jours est de fouiller dans les archives du site internet du CRAN. Par exemple, dans le fichier _README_ de la version R.0.49, on peut lire qu'en avril 1997, une bonne partie des fonctions du _Blue book_ [@becker_new_1988] et du _White Book_ [@chambers_statistical_1993] étaient déjà implémentées. La reconnaissance formelle du groupe R-Core est présente dans la version R.0.60 de décembre 1997. L'implémentation d'une grande partie des fonctionnalités de S conduisit à la version 1.0.0 de R, le 29 février 2000. Pour l'anecdote, le premier CD-ROM fut donné à John Chambers qui avait rejoint l'équipe du R-Core en 1998. En janvier 2001, c'est la première version d'un journal dédié à R (alors appelé R news) qui fut publiée (voir https://www.r-project.org/doc/Rnews/Rnews_2001-1.pdf, consulté le 12 décembre 2018). En décembre 2001, avec la version 1.4, ce sont les objets S4 qui sont implémentés. Ces derniers étaient décrits dans le _Green Book_ [@chambers_programming_1998] et procurèrent à R un cadre beaucoup plus formel pour faire de la programmation orientée objet. En octobre 2004, la version 2.0 était distribuée, et introduit pour la première fois le *lazy loading* (chargement paresseux) permettant d'améliorer les performances de R: lorsqu'un package (extension) est chargé, il est rare que toutes ses fonctionnalités soient exploitées en même temps, R crée des bases de données pour stocker et répertorier le code qui ne sera alors chargé qu'au premier appel de l'utilisateur. En avril 2013, la gestion des valeurs d'indexation des vecteurs supérieurs à 2^31^ pour les systèmes exploitant des processeurs à 64 bits augmenta les performances de R en termes de mémoire et nous amena aux versions 3.x.x. Pour les lecteurs qui cherchent à obtenir des détails techniques relatifs aux fonctionnements internes de R, il est à noter qu'une documentation couvrant ces aspects est disponible en ligne https://cran.r-project.org/doc/manuals/r-release/R-ints.html (consulté le 21 décembre 2018). De plus, l’ensemble des changements associés aux différentes versions de R depuis Juin 2009 sont rapportés dans les différent numéros du *R Journal* dont les numéros sont visibles en ligne à l'adresse suivante https://journal.r-project.org/ (consulté le 21 décembre 2018)
et il est possible de remonté jusqu'en 2001 en consultant les différents
numéros de *R News* disponible à https://journal.r-project.org/archive/r-news.html
(consulté le 21 décembre 2018).



|Version     | Date de publication| Notes                                      |
|:-----------|:-------------------|:-------------------------------------------|
|R-0.49      | 23 avril 1997      | première version accessible sur le CRAN    |
|R-1.0.0     | 29 février 2000    | pour l'année millénaire et donc bissextile |
|R-1.2.1     | 22 juin 2001       | premier volume de R news                   |
|R-2.0.0     | 4 octobre 2004     | introduit le *lazy loading*                |
|R-3.0.0     | 3 avril 2013       | optimization pour les processeurs à 64 bits|
|R-3.5.0     | 23 avril 2018      | tous les packages sont                     |
|R-3.5.2     | 20 décembre 2018   | version utilisée pour ce livre             |

: Date de sortie des différentes version sur le CRAN (voir https://cran.r-project.org/ pour une list complète).


[^naisR3]:Il est notamment l'auteur de l'ouvrage _R graphics_[ref].

[^naisR2]:Scheme est apparu dans les années 1970 au Massachusetts Institute of Technology (MIT) grâce au travail de Guy Lewis Steel et Geral Jay Sussman.

[^naisR4]:https://stat.ethz.ch/mailman/listinfo

[^naisR5]:Avec Friedrich Leisch, de la même institution, ils s'étaient rapprochés du projet en apportant des corrections à des bugs.

[^naisR6]:Ils étaient 11 initialement, 16 en 2002 et 21 en août 2015.





## R aujourd'hui


### Mais R c'est quoi au juste?

Les premières phrases de l'article en français consacré à R sur Wikipedia définissent R ainsi:

> R est un langage de programmation et un logiciel libre destiné aux statistiques et à la science des données soutenu par la R Foundation for Statistical Computing. R fait partie de la liste des paquets GNU3 et est écrit en C (langage), Fortran et R.[^noteR7]

[^noteR7]: https://fr.wikipedia.org/wiki/R_(langage) consulté le 22 décembre 2018.

De même sur la page du projet R, on peut lire:

> R is a free software environment for statistical computing and graphics. It compiles and runs on a wide variety of UNIX platforms, Windows and MacOS.[^noteR8]

> R est un environment logiciel pour la statistique computationnelle et les
graphiques. Il peut être compilé et exécuté sur un grand nombre de plateforme UNIX, Windows et MacOS.

[^noteR8]: https://fr.wikipedia.org/wiki/R_(langage) consulté le 22 décembre 2018.

R est donc un logiciel particulier: il permet d'écrire du code (*en* R) et exécuter du code (*dans* R) pour faire des statistiques et des graphiques.
R est un langage dit interprété

![Langage interprété (voir http://www.france-ioi.org/algo/course.php?idChapter=561&idCourse=2368)](http://data.france-ioi.org/Course/general_interpreted_vs_compiled/schema_interpreted_FR.png)

par opposition à un langage compilé comme C (le langage dans lequel R est écrit).

![Langage compilé (voir http://www.france-ioi.org/algo/course.php?idChapter=561&idCourse=2368)](http://data.france-ioi.org/Course/general_interpreted_vs_compiled/schema_compiled_FR.png)

Concrètement R est un ensemble de fichiers. Dans la version 3.5.2, il y, entre autre, 559 fichiers `.c`, 289 fichiers `.po` (pour la traduction en différente langues), 196 fichiers `.h` (headers utilisé avec C), 86 fichiers `.f` (FORTRAN) et 2346 fichiers `.R`. À l'installation de R, tous ces fichiers sont
compilés de sorte que vous pouvez utiliser R dans un terminal.

![](img/chap2/screenshotR.png)

Un terminal avec R permet d'utiliser toutes les fonctionnalités de R mais n'est suffisant pour programmer de manière efficace. C'est pourquoi on utilise une interface de développement, R propose une telle interface mais la plus populaire de nos jours est RStudio[^noteRStud], nous y reviendrons.

[^noteRStud]: https://www.rstudio.com/products/rstudio/download/ consulté le 24 décembre 2018.


### Un ensemble d'acteurs

Il y a aujourd'hui une myriade d'acteurs qui gravitent autour de R de sorte qu'il est difficile de s'y retrouver et de comprendre qui fait quoi. Ce qui suit est une tentative de mettre un peu d'ordre dans toutes ces informations.


#### La R fondation et la *R Development Core Team*

Le plus simple pour se repérer est de consulter sur la page du projet R: https://www.r-project.org/ (consulté le 23 décembre 2018). Sur cette page, on trouve notamment un lien vers la Fondation R[^noteProj]. Il s'agit d'une organization a but non lucratif qui a été créé par les membres de la *R Development Core Team* pour pérenniser le développement de R et c'est finalement une distinction. Les membres de la fondation sont des personnes reconnus pour les efforts dans le développement de R, c'est une distinction honorifique. Quand aux membres de la *R Development Core Team*, ce sont les développeurs qui ont un accès d'écriture au code source de R. Ce sont les premiers membres listés quand vous tapez `contributors()` dans une console R. Ils fixent les bogues dans les fonctionnalités de base de R[^noteR9] et rendent disponibles les nouvelles versions de R sur le CRAN.

[^noteProj]: https://www.r-project.org/foundation/ consulté le 23 décembre 2018


#### Le CRAN

Toujours sur la page du projet R, il y a un lien vers le CRAN (*Comprehensive R Archive Network*) qui est le site Internet où sont archivées les différentes versions de R ainsi que les packages qui ont été soumis au CRAN et qui ont été acceptés. C'est également une source privilégiée de resources avec de nombreux manuels et ouvrages pour se familiariser avec R (voir les sections *Manuals* et *Contributed* sur https://cran.r-project.org/). Le CRAN est maintenu par une équipe de volontaires, la "CRAN team", qui met à jour le site et s'occupent des soumissions des packages. Pour être plus exact, le CRAN est une collection de sites miroirs dont les contenus sont synchronisés avec le site du CRAN maintenu à la Wirtschaftsuniversität à Vienne. En 2002, il existait 12 sites miroirs, et en
décembre 2018, 164 sites miroirs se répartissent les téléchargements de R et de ses packages, ainsi que l'archivage des différentes versions. Comment avoir accès à ces chiffres? Avec R bien sur:

```R
# lit le code source de la page qui référence les miroirs
mir <- readLines("https://cran.r-project.org/mirrors.html")
# compte le nombre de ligne qui contiennent des liens internet avec
# http dans le lien (il y a d'autres liens sur la page mais sans http)
sum(
  unlist(
    lapply(mir, grepl, pattern = "<a href=\"http")
  )
)
```

[^noteR9]: Que les utilisateurs peuvent rapportés sur bugzilla https://bugs.r-project.org/bugzilla3/.



#### Le consortium R

Une autre entité qui a vu le jour récemment est le consortium R :
https://www.r-consortium.org/ (consulté le 24 décembre 2018). Comme indiqué
par le site Internet dédié

> The central mission of the R Consortium is to work with and provide support to the R Foundation and to the key organizations developing, maintaining, distributing and using R software through the identification, development and implementation of infrastructure projects.

> La mission centrale du consortium R est de collaborer avec la Fondation R et les
organisation majeures qui développent, maintiennent, distribuent et utilisent
le logiciel R à travers l'identification,. le development et l’implémentation
de projet infrastructure.

Ce projet est l'un des projets Open Source supporté par la Fondation Linux:  https://www.linuxfoundation.org/projects/ (consulté le 22 décembre 2018). Pour
voir les soutiens financiers du consortium R rendez vous sur cette page https://www.r-consortium.org/members.



#### RStudio

Il s'agit d'un acteur très connus au point qu'il y a une parfois une confusion
entre R et RStudio. RStudio, Inc.[^noteRStudio] une entreprise fondé par Joseph J. Allaire qui développe un environment de développement[^noteRStudio2] pour R propose des services aux entreprises basés sur R (voir la section *Products* sur leur site Internet). En décembre 2018, RStudio comptait près d'une centaine de salariés https://www.rstudio.com/about/ dont de nombreux programmeurs parmi les plus actifs au sein de la communauté des utilisateurs de R (Hadley Wickham et Yihui Xie par exemple). RStudio est connu pour son interface de développement du même nom et pour la qualité des packages R que les salariés de RStudio développements. C'est un modèle économique classique dans le monde de l’opensource[^noteRStudio3]: une entreprise propose des services autour d'un logiciel qu'elle contribue activement a améliorer et dont elle fait une promotion active (étant donné que c'est la qualité du logiciel qui va déterminer son nombre de clients). Dans le cas de RStudio est énorme car les packages qu'elles contribuent à développer son parmi les plus utilisés[^noteRStudio4].

[^noteRStudio]: https://www.rstudio.com/ consulté le 24 décembre 2018.
[^noteRStudio2]: https://fr.wikipedia.org/wiki/Environnement_de_d%C3%A9veloppement consulté le 24 décembre 2018.
[^noteRStudio3]: https://medium.com/france/business-model-de-l-open-source-a2d8e53181f7 consulté le 24 décembre 2018
[^noteRStudio4]: voir le compte GitHub de RStudio https://github.com/rstudio (consulté le 24 décembre 2018)


<!-- Ici le 24 décembre -->

#### rOpenSci

Comme indiqué sur le site Internet de rOpenSci[^noterOpen]

> rOpenSci fosters a culture that values open and reproducible research using shared data and reusable software.

> rOpenSci encourage une culture qui promeut la recherche ouverte et reproductible qui utilise des données partagées et des logiciels réutilisables.


Pour cela l'équipe de rOpenSci crée et révise des packages[^noterOpen2] qui facilitent la recherche reproductible. Cela peut être des outils comme `drake`[^noterOpen2a] qui permet d'améliorer l'efficacité et la reproductibilité de son flux de travail ou encore des outils comme `taxize`[^noterOpen2b] qui parcourt différentes bases de données disponible sut Internet pour aller chercher les information taxonomiques demandées par l'utilisateur. rOpenSci anime également un blog[^noterOpen3] sur lequel on trouve des posts présentant les différents packages révisés par rOpenSci et aussi des tutoriels pour apprendre à réaliser certaines manipulation de données avec R. Enfin, rOpenSci anime une communauté[^noterOpen4] dynamique
et propose des *community calls* qui sont des présentations sur certains aspects de R.



[^noterOpen]: https://ropensci.org/about/ consulté le 26 décembre 2018 ou on apprend aussi que que rOpenSci est sponsorisé par NUMFOCUS  (https://numfocus.org/).
[^noterOpen2a]: https://github.com/ropensci/drake consulté le 26 décembre 2018.
[^noterOpen2b]: voir https://github.com/ropensci/taxize et https://ropensci.org/tutorials/taxize_tutorial/ consultés le 26 décembre 2018.
[^noterOpen2]: https://ropensci.org/packages/ consulté le 26 décembre 2018.
[^noterOpen3]: https://ropensci.org/blog/ consulté le 26 décembre 2018.
[^noterOpen4]: https://ropensci.org/community/ consulté le 26 décembre 2018.



#### La communauté des utilisateurs de R

La myriade des utilisateurs de R est sans aucun doute l'un des acteurs les plus importants. La communauté des utilisateurs de R:

1. augmente les fonctionnalités de R en créant des packages;
2. partage du contenu sur R que se soit en éditant des manuels, des livres, des blogs et des présentations;
3. s'auto-organize à travers des communautés locales d'utilisateurs;
4. s'auto-supporte: les utilisateurs répondent rapidement aux questions d'autres utilisateurs.

Tout le monde peut écrire des packages ou partager son expérience avec R et de fait, beaucoup d'utilisateurs le font. Il existe un grand nombre de bloggers qui produisent une multitude de posts sur différents aspects de R[^noteCom]. C'est une resource riche et diversifiée, il existe une plateforme très utile qui rassemble de nombreux posts issu de blog plus ou moins populaire[^noteCom1]: R-bloggers[^noteCom2]. La communauté des utilisateurs de R est en croissance, il n'y pas, à notre connaissance, de manière directe de mesurer le nombre exacte d'utilisateurs de R mais il y a de nombreux indices comme le nombre de groupe d'utilisateurs de R comme le montre la couverture du dernier livre de John Chambers qui compare le nombre de groupe d'utlisateurs de R entre 2010 et 2015.

![Couverture de *Extending R* [@chambers_extending_2016]. Pour une liste qui recense ces communautés, voir https://jumpingrivers.github.io/meetingsR/index.html (consulté le 26 décembre 2018)](https://images.tandf.co.uk/common/jackets/amazon/978149877/9781498775717.jpg)

On peut aussi regarder le nombre de packages qui dépassait 10,000 en 2016 (voir https://blog.revolutionanalytics.com/2017/01/cran-10000.html consulté le 26 décembre 2018). Un autre indice plus proche de nous. Nous sommes des écologistes et dans notre discipline, R est un incontestablement figure parmi les logiciel les plus utiliser et la demande en formation est constante.


[^noteCom]: Nous avons notre propre blog qui traite souvent de R https://insileco.github.io/.
[^noteCom1]: https://blog.feedspot.com/r_programming_blogs/ pour une classification subjective.
[^noteCom2]: https://www.r-bloggers.com/ consulté le 26 décembre 2018.



<!-- ICI 26/12/2018 -->

### Trouver de la documentation pour R

S'initier à un nouveau langage de programmation peut être assez déroutant au début. Heureusement, de nombreuses ressources sont disponibles sur Internet. La page d'accueil du projet R (https://www.r-project.org) en recense certaines. On y trouve notamment des explications, en anglais pour la plupart, pour comprendre ce qu'est R, des liens pour se documenter et connaître les prochains événements autour de R, dont les conférences internationales _Use R!_[^resR1].

Au lien _Contributed_ de la section _Documentation_ du CRAN, sont entreposés des manuels d'utilisation de R rédigés par des utilisateurs de R sous différentes langues. En français, on y trouve notamment le manuel _R pour les débutants_ d'Emmanuel Paradis, mais aussi un _Aide mémoire R_ rédigé par Mayeul Kauffmann [ref]. Deux autres sources d'informations sont à mentionner bien qu'exclusivement rédigées en anglais.
La première est _The R journal_ (intitulé _R news_ de 2001 à 2009) que nous avons mentionnés plus haut. Cette revue bisannuelle détaille les modifications apportées aux nouvelles versions de R parues depuis le numéro précédent. Les changements sur le CRAN y sont aussi indiqués avec la liste des nouveaux packages. On y trouve également des articles qui font, le plus souvent, la présentation d'un nouveau package.
La deuxième source est constituée par l'ensemble des listes de diffusion relatives à R. En 1997, il y avait trois listes de diffusion : _R-announcement_ pour annoncer les nouveautés de R, _R-help_ dédiée à l’entraide entre utilisateurs R et _R-devel_ pour les développeurs. Depuis, ont été ajoutées les listes _R-package-devel_, pour les développeurs de packages et _R-packages_ pour annoncer la sortie de nouveaux packages. À côté de ces listes principales, on trouve également pas moins de 22 autres listes de diffusion couvrant les différentes utilisations de R : les listes _R-SIG_ (_Special Interest Group_) qui traitent aussi bien du traitement des données spatiales que de l'écologie ou encore de la finance (https://www.r-project.org/mail.html).

Les utilisateurs anglophones ont facilement accès à une masse considérable d'informations grâce à différents ouvrages, notamment ceux regroupés dans la collection _Use R!_, publiée par le groupe éditorial Springer et éditée par R. Gentleman, K. Hornik Kurt et G. Parmigiani. Des ouvrages dédiés à R sont aussi disponibles en français, mais en nombre plus restreint. Gaël Millot a ainsi écrit un ouvrage très complet (plus de 800 pages dans la troisième édition), *Comprendre et réaliser les tests statistiques à l'aide de R* édité chez de Boeck. Springer a édité durant un temps des ouvrages dans la série _Pratique R_. Il existe aussi trois ouvrages qui abordent la statistique avec R aux Presses Universitaires de Rennes, ou encore _R et espace_ édité chez Framabook. Une fois les bases acquises avec R, les utilisateurs peuvent avoir recours à la documentation disponible sur des forums tel que celui maintenu par le Centre de coopération internationale en recherche agronomique pour le développement (CIRAD) http://forums.cirad.fr/logiciel-R/index.php. Notons qu'il y a aussi de très bon blogs en anglais http://www.r-bloggers.com, http://www.r-statistics.com, http://blog.rstudio.org, http://blog.revolutionanalytics.com, etc.

Des acteurs
https://www.datacamp.com/courses/free-introduction-to-r

https://insileco.github.io/wiki/usefulr/

[^resR1]: Il s'agit d'un rassemblement des utilisateurs de R. La première conférence a eu lieu à Vienne en 2004 et les conférences se tiennent chaque année dans différents pays depuis 2006.



### Les packages

R est un système modulaire : aux outils de base peuvent venir se greffer des fonctionnalités additionnelles selon les besoins de l'utilisateur. Un package (ou librairie) est un ensemble de fonctionnalités regroupées sous une même thématique que l'on ajoute à R. R est alors un cadre sur lequel peuvent être montés de nombreux packages. Parmi ces packages, certains sont installés par défaut avec R. Par ex., pour la version 3.2.2, vingt-huit packages accompagnent l'installation de R, dont 13 ont la priorité « base » (p. ex. le package `graphics`) et offrent à l'utilisateur les fonctionnalités primaires de R, et 15 sont recommandés (dont le package `nlme` qui permet de faire des modèles mixtes). Au gré de son usage, on peut ajouter des fonctionnalités supplémentaires pour étendre les possibilités offertes par R. Tous les packages présentent la même architecture : ils sont accompagnés d'une documentation complète, d'exemples concrets, et de nombreuses autres informations.

En général, un package regroupe un ensemble de fonctions réunies sous une même thématique. Par ex., on trouvera des packages pour faire des modèles mixtes, de la géostatistique, des graphiques, etc. Les packages _jpeg_ et _png_ proposés par Simon Urbanek sont chacun composé de deux fonctions permettant d'importer et d'exporter des fichiers au format jpeg et png.
Le package _plotrix_, maintenu par Jim Lemon, dans sa version 3.5-12, est une collection d'environ 150 fonctions qui étendent les fonctionnalités graphiques du package _graphics_.
Dans un autre genre, le package _ggplot2_, maintenu par Hadley Wickham, est une implémentation de _La Grammaire des Graphiques_ développée par Leland Wilkinson. Ce package est d'une certaine manière plus qu'une simple collection de fonctions, il développe des outils et des méthodes qui changent drastiquement l'approche que l'on a du graphique.

Combien de packages existe-t-il actuellement ? Dans le numéro de décembre 2009 du _The R journal_[^fox], John Fox relate la croissance exponentielle du nombre de packages R. Nous nous sommes inspirés de cet article pour actualiser cette évolution du nombre de packages archivés sur le CRAN jusqu'en 2015 pour réaliser la figure.
<!-- @fig:nbpkgs. -->

<!-- ![Somme cumulée des packages archivés sur le CRAN](chap2/fig/figpackg.pdf){width=95%}
 KC mettre aussi nombre de référence dans les puclication scientific avec Web of science-->

une source privilégiés mais non exclusifs Le CRA
https://cran.r-project.org/web/packages/policies.html


D'une centaine de package au début des années 2000, on arrive à plus de 7000 en août 2015 et à près de 14300 à la fin décembre 2018. Comme le souligne déjà Kurt Hortnik en 2009[ref], cette abondance de packages pose un certain nombre de questions relatives à la facilité de trouver la fonctionnalité désirée, la redondance des fonctions et la qualité du code. Un package soumis au CRAN est en fait soumis à un ensemble de tests qui s'assurent que les fonctions peuvent être exécutées et que les exemples fonctionnent. Il n'y a pas de vérification sur la redondance des fonctions vis à vis des autres packages ou encore sur la qualité du code. Selon Kurt Hortnik, en dépit des défis posés par le nombre croissant de packages développés, une politique plus contraignante n'est pas souhaitable, et quand bien même celle-ci serait mise en place, elle n'affecterait pas tant la courbe de croissance. A son avis, il faudrait repenser les relations entre les packages afin de diminuer la similarité entre les packages au profit d'interdépendances. Cela dit, pour rassurer les utilisateurs de R, la qualité de nombreux packages a été évaluée par des journaux spécialisés comme le _Journal of Statistical Software_. De même, les retours de la part de la communauté des utilisateurs de R est, comme en témoigne son histoire, un facteur essentiel. Ainsi, les faiblesses de tel ou tel package peuvent vite être détectées et la coopération entre utilisateurs est facilité grâce à des outils comme _Github_, *Bitbucket* ou encore l'outil R dédié [*R-Forge*](https://r-forge.r-project.org).

https://www.r-pkg.org/

![](img/chap2/metacran.png)


https://rdrr.io/

![](img/chap2/rdrr.png)



### Les interfaces utilisateurs

Travailler avec R, c'est finalement utiliser le langage R avec le logiciel R. Concrètement, le processus est relativement simple : écrire du code dans le langage R qui sont ensuite exécutées par le logiciel R.

Pour réaliser ces étapes, il existe plusieurs cadres de travail possibles. Quand R est téléchargé sur le CRAN, pour Windows et Mac OS X, il est fournit avec une interface utilisateur dédié à chacun de ces systèmes d'exploitation. Ces interfaces permettent d'avoir une console graphique ainsi qu'une interface pour écrire les lignes de commandes que l'on exécute ensuite. Il est aussi possible d'utiliser R dans un terminal sous Linux, Mac OS X et Windows. Dans ce cas, l'utilisateur dispose d'une interface pour communiquer avec R sans aucune autre facilité. Ainsi, l'utilisateur devra se munir d'un outil de son choix pour écrire les commandes R qu'il souhaite enregistrer et utiliser de manière différée. Un tel outil est un bon éditeur de code, il en existe énormément, un éditeur récent, performant, multiplate-forme et gratuit est [Atom](https://atom.io).

De l'utilité des scripts...

Utiliser une interface de type console avec un éditeur de code reste une solution pour des habitués de la programmation. Pour les utilisateurs débutants, un environnement performant et moins austère est [RStudio](https://www.rstudio.com). C'est un environnement intégré de développement R open-source, multiplate-forme et gratuit pour la version _Desktop_ qui permet de visualiser facilement la console où le code est exécuté, l'éditeur de lignes de code, les figures réalisées, la liste des packages chargés, la documentation, etc. Cette solution est vraiment à recommander lorsqu'on débute avec R et même pour la suite. Noter que RStudio est aussi une entreprise qui propose d'autres services qui ont trait à R. Par exemple, RStudio propose des form[^naisR2]:Scheme est apparu dans les années 1970 au Massachusetts Institute of Technology (MIT) grâce au travail de Guy Lewis Steel et Geral Jay Sussmanations par des experts qui sont auteurs de packages très populaires de R, par exemple Hadley Wickham auteur du package _ggplot2_.



[^fox]:Disponible à cette adresse : http://journal.r-project.org/archive/2009-2/
